---
import Layout from "@/layouts/Layout.astro";
import { Image } from "astro:assets";
import { getEntry } from "astro:content";

// import Components
import PengurusProfile from "@/components/PengurusProfile.astro";

// Images
import logoIni from "./images/logo-ini.svg";
import IntanPidato from "./images/intan-pidato.jpg";
import pelantikan from "./images/pelantikan.jpg";
import arisan from "./images/arisan.jpeg";
import ini from "./images/ini-2.jpeg";

// Import Profil Pengurus
import Ketua from "./images/ketua.jpg";
import WakilKetua from "./images/wakil-ketua.jpg";
import Sekertaris from "./images/sekertaris.jpg";
import Sekertaris2 from "./images/sekertaris2.jpg";
import Bendahara from "./images/bendahara.jpg";
import DanaUsaha from "./images/dana-usaha.jpg";

// import pengurus data
const allPengurus = await getEntry("mockup", "daftarPengurus");
function categorizeByPosition(members) {
    return members.reduce((acc, member) => {
        const { position } = member;
        if (!acc[position]) {
            acc[position] = [];
        }
        acc[position].push(member);
        return acc;
    }, {});
}

const categorizedMembers = categorizeByPosition(allPengurus.data);
---

<Layout title="Organisasi">
    <div class="mb-16 lg:mb-24"></div>
    <div class="max-w-4xl mx-auto px-4 mb-4 lg:mb-8 relative">
        <Image
            src={logoIni}
            inferSize={true}
            alt="logo-ini"
            class="w-20 lg:w-96 mb-4 mx-auto lg:absolute -left-32 -bottom-24 lg:inline-block -z-10 lg:opacity-20"
        />
        <div class="font-serif text-center lg:text-left z-10">
            <p class="text-xl lg:text-2xl">Pengurus Daerah Kabupaten Garut</p>
            <p class="text-2xl lg:text-4xl">IKATAN NOTARIS INDONESIA</p>
        </div>
    </div>
    <div class="max-w-7xl mx-auto mb-4 lg:mb-24 relative">
        <div class="flex flex-wrap lg:flex-nowrap lg:gap-4">
            <Image
                src={IntanPidato}
                inferSize={true}
                alt="logo-ini"
                class="w-1/2 lg:w-1/4 aspect-[4/4] lg:aspect-[10/16] object-cover"
            />
            <Image
                src={pelantikan}
                inferSize={true}
                alt="logo-ini"
                class="w-1/2 lg:w-1/4 aspect-[4/4] lg:aspect-[10/16] object-cover relative lg:top-12"
            />
            <Image
                src={arisan}
                inferSize={true}
                alt="logo-ini"
                class="w-1/2 lg:w-1/4 aspect-[4/4] lg:aspect-[10/16] object-cover"
            />
            <Image
                src={ini}
                inferSize={true}
                alt="logo-ini"
                class="w-1/2 lg:w-1/4 aspect-[4/4] lg:aspect-[10/16] object-cover relative lg:top-12"
            />
        </div>
    </div>
    <div class="max-w-4xl mx-auto px-4 mb-4 lg:mb-16 relative">
        <h2 class="text-xl lg:text-2xl font-serif mb-8">
            Tentang Kami
        </h2>
        <p class="max-w-prose lg:text-xl lg:pl-32 lg:leading-relaxed">
            Kami adalah Pengurus Daerah Kabupaten Garut Ikatan Notaris
            Indonesia, yang berdedikasi untuk menjalankan tugas dan tanggung
            jawab sesuai dengan amanat undang-undang. Dengan komitmen terhadap
            profesionalisme dan integritas, kami berupaya memberikan pelayanan
            terbaik bagi masyarakat. Sebagai bagian dari Ikatan Notaris
            Indonesia, kami senantiasa menjaga standar etika profesi dan
            berkontribusi dalam pembangunan hukum di Kabupaten Garut.
        </p>
    </div>
    <div class="max-w-4xl mx-auto px-4 gap-8 mb-8 relative">
        <h2 class="text-xl lg:text-3xl font-serif ">
            Susunan<br />
            Pengurus Daerah Kabupaten Garut<br />
            IKATAN NOTARIS INDONESIA (I.N.I)<br />
            Periode 2023 - 2026
        </h2>
    </div>
    <div class="max-w-7xl mx-auto px-4 mb-4 lg:mb-24 relative">
        <div class="grid gap-4 grid-cols-1 lg:grid-cols-5 lg:grid-rows-2">
            <PengurusProfile
                fullName="INTAN RUBYATI DEWI, S.H.,M.Kn"
                position="Ketua"
                image={Ketua}
                gridSize="lg:col-span-2 lg:row-span-2"
            />
            <PengurusProfile
                fullName="I.IRFAN IBRAHIEM, S.H.,M.Kn"
                position="Wakil Ketua"
                image={WakilKetua}
                gridSize=""
            />
            <PengurusProfile
                fullName="RUDI CAHYADI, S.H.,M.Kn"
                position="Sekertaris"
                image={Sekertaris}
                gridSize=""
            />
            <PengurusProfile
                fullName="CITRA APRILIA FATMAWATI, S.H., M.Kn"
                position="Sekertaris"
                image={Sekertaris2}
                gridSize=""
            />
            <PengurusProfile
                fullName="HERAWATI ROFITA, S.H., M.Kn"
                position="Bendahara"
                image={Bendahara}
                gridSize=""
            />
            <PengurusProfile
                fullName="HEARNY ANNISSA, S.H., M.Kn"
                position="Dana Usaha"
                image={DanaUsaha}
                gridSize=""
            />
        </div>
    </div>
    <div class="max-w-5xl mx-auto px-4 gap-8 mb-8 relative">
        <!-- {
            allPengurus.data.map((user, i) => (
                <div class="flex gap-2 mb-2">
                <img src={`https://i.pravatar.cc/48?img=${i+1}`} alt="">
                <h4 class="font-serif capitalize">{user.fullName}</h4>
                </div>
            ))
        } -->
        <div class="lg:flex flex-wrap">
        {
            Object.keys(categorizedMembers).map((cat, x) => (
                <div class="mb-6 lg:w-1/2">
                    <h4 class="capitalize font-bold text-zinc-500 text-sm mb-4">
                        {cat}
                    </h4>
                    <ul class="">
                        {categorizedMembers[cat].map((user, i) => (
                            <li class="flex gap-2 mb-2 w-full items-center">
                                <img
                                    src={`https://i.pravatar.cc/64?img=${i + x * 4}`}
                                    alt={user.fullName}
                                    class="rounded"
                                />
                                <h4 class="capitalize font-bold">
                                    {user.fullName}
                                </h4>
                            </li>
                        ))}
                    </ul>
                </div>
            ))
        }
        </div>
    </div>
</Layout>
